// Generated by CoffeeScript 1.3.3
(function() {
  var ServerAction, error;

  error = require('./error');

  ServerAction = (function() {

    ServerAction.prototype.maxRoomSize = function() {
      return 2;
    };

    function ServerAction(sockets) {
      this.sockets = sockets;
    }

    ServerAction.prototype.getClientAmount = function(roomId) {
      return this.sockets.clients(roomId).length;
    };

    ServerAction.prototype.joinRoom = function(socket, roomId) {
      var clients;
      clients = this.getClientAmount(roomId);
      if (clients < this.maxRoomSize()) {
        return socket.join(roomId);
      } else {
        throw new error.ServerError("Room " + roomId + " is full", error.code.roomFull);
      }
    };

    return ServerAction;

  })();

  module.exports = ServerAction;

}).call(this);
